# 生产者-消费者模型


生产者是一堆线程，消费者是另一堆线程，内存缓冲区可以使用List数组队列，数据类型只需要定义一个简单的类就好。关键是如何处理多线程之间的协作。

在这个模型中，最关键就是内存缓冲区为空的时候消费者必须等待，而内存缓冲区满的时候，生产者必须等待。其他时候可以是个动态平衡。值得注意的是多线程对临界区资源的操作时候必须保证在读写中只能存在一个线程，所以需要设计锁的策略。

下面的例子中，使用notify/wait()和await()/signal()方法来设计锁

Main类中的方法启动多个生产者进程和消费者继承，在启动生产者进程时指定使用的Buffer和Buffer最大可以存放的阈值。当Buffer中存放的数目大于这个阈值时，生产者进程拥塞，消费者进程开始消费；消费者进程消费完所有的产品之后，消费者进程拥塞，生产者进程开始生产；

即同一时刻只可能有一种进程（生产者线程 或者是 消费者线程）在运行

## 使用BlockingQueueModel实现
见包`com.zhong.BlockingQueueModel`